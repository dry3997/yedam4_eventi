<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
   xmlns:th="http://www.thymeleaf.org"
   xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
   layout:decorate="~{layouts/default_layout}">


<div layout:fragment="content">
<section class="module bg-dark-60 gallery-page-header parallax-bg" data-background="assets/images/gallery_bg.jpg" style="background-image: url(&quot;assets/images/gallery_bg.jpg&quot;);">
          <div class="container">
            <div class="row">
              <div class="col-sm-6 col-sm-offset-3">
                <h2 class="module-title font-alt">게시글 수정</h2>
                <div class="module-subtitle font-serif">Small Title</div>
              </div>
            </div>
          </div>
        </section>
   
		<div class="row no-gutters">
		<div class="col-md-7">
			<div class="contact-wrap w-100 p-md-5 p-4">
				<h3 class="mb-4">구인게시글 수정</h3>
				<form method="POST" id="jobUpdate" name="jobUpdate"class="contactForm">
				<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
					<div class="row">
						<div class="col-md-12">
							<div class="form-group">
								<input type="hidden" name="jobNo" id="jobNo" th:value="${update.jobNo}"> <label
									class="label" for="ttl">제목</label> 
									<input type="text" class="form-control" name="title" id="title" th:value=${update.title}>
							</div>
						</div>

						<div class="col-md-12">
							<div class="form-group">
								<label class="label" for="#">내용</label>
								<textarea name="jobCntn" class="form-control" id="jobCntn" cols="30" rows="4" th:utext=${update.jobCntn}></textarea>
							</div>
						</div>
						
						<div class="col-md-12">
							<div class="form-group">
								<label class="label" for="#">수당</label>
								<input type="number" class="form-control" name="pay" id="pay" th:value=${update.pay}>
							</div>
						</div>
						
						<div class="col-md-12">
							<div class="form-group">
								<label class="label" for="#">위치</label>
								<textarea name="loc" class="form-control" id="loc" cols="30" rows="4" th:utext=${update.loc}></textarea>
							</div>
						</div>
						
		<!--				<div class="col-md-12">
							<div class="form-group">
								<label class="label" for="#">행사유형</label>
								<textarea name="eType" class="form-control" id="eType" cols="30" rows="4" th:utext=${update.eType}></textarea>
							</div>
						</div>-->
						
						<div class="col-md-12">
							<div class="form-group">
								<label class="label" for="#">행사유형</label> 
								<select id="eType" name="eType" th:value=${update.eType}>
									<option value="">행사유형을 선택해 주세요.</option>
									<option value="E01">결혼식</option>
									<option value="E02">돌잔치</option>
									<option value="E03">개인행사</option>
									<option value="E04">기업행사</option>
									<option value="E05">각종축제</option>
									<option value="E00">기타</option>
								</select>
							</div>
						</div>
						
						<div class="col-md-12">
							<div class="form-group">
								<label class="label" for="#">근무시작일</label>
								<input type="date" name="wSday" id="wSday" th:value=${update.wSday}>
							</div>
						</div>
						
						<div class="col-md-12">
							<div class="form-group">
								<label class="label" for="#">근무종료일</label>
								<input type="date" name="wEday" id="wEday" th:value=${update.wEday}>
							</div>
						</div>
						
						<div class="col-md-12">
							<div class="form-group">
								<label class="label" for="#">근무시간</label>
								<input type="number" name="wHour" id="wHour" th:value=${update.wHour}>
							</div>
						</div>
						
						<div class="col-md-12">
							<div class="form-group">
								<label class="label" for="#">자격</label>
								<textarea name="preference" class="form-control" id="preference" cols="30" rows="4" th:utext=${update.qualification}></textarea>
							</div>
						</div>
						
						<div class="col-md-12">
							<div class="form-group">
								<label class="label" for="#">우대사항</label>
								<textarea name="preference" class="form-control" id="preference" cols="30" rows="4" th:utext=${update.preference}></textarea>
							</div>
						</div>
						
						<div class="col-md-12">
							<div class="form-group">
								<label class="label" for="#">마감일</label>
								<input type="date" name="closeDt" id="closeDt">
							</div>
						</div>
						
						<div class="col-md-12">
							<div class="form-group">
								<input type="file" name="img" th:value=${update.img}>
							</div>
						</div>
						
						<div class="col-md-12">
							<div class="form-group">
								<label class="label" for="#">회원ID</label>
								<input type="text" name="userId" id="userId" th:value=${update.userId}>
							</div>
						</div>

						<div class="col-md-12">
							<div class="form-group">
								<input type="button" id="update" value="수정"
									class="btn btn-primary">
								<div class="submitting"></div>
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>


<script>
let oEditors = []

smartEditor = function() {
	console.log("Naver SmartEditor")
	nhn.husky.EZCreator.createInIFrame({
		oAppRef : oEditors,
		elPlaceHolder : "jobCntn",
		sSkinURI : "/smarteditor2/SmartEditor2Skin.html",
		fCreator : "createSEditor2"
	})
}

$(document).ready(function() {
	smartEditor()
})

$('#update').on('click', function update() {
	alert("클릭")
	oEditors.getById["jobCntn"].exec("UPDATE_CONTENTS_FIELD", [])
	let jobCntn = document.getElementById("jobCntn").value;
	alert(jobCntn)
	
	let jobNo = document.getElementById("jobNo").value;

	var data = $('form[name="jobUpdate"]').serializeArray();

	//구직테이블 수정처리
	$.ajax({
		url : "/jobUpdate",
		method : 'post',
		contentType : 'application/x-www-form-urlencoded',
		data : data,
		success : function(data) {
			if(data == 1){
			alert('수정완료!');
			location.href = '/jobList';
			}else
				alert('수정실패')
		},
		fail : function(result) {
			alert('필수항목을 입력해주세요')
		}
	})
})
</script>
</div>
</html>