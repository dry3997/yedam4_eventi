<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
   xmlns:th="http://www.thymeleaf.org"
   xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
   layout:decorate="~{layouts/default_layout}">

<head>



<style>
	.menu-item,
	.menu-open-button {
	   background: #EEEEEE;
	   border-radius: 100%;
	   width: 30px;
	   height: 30px;
	   position: absolute;
	   color: #FFFFFF;
	   text-align: center;
	   line-height: 35px;
	   -webkit-transform: translate3d(0, 0, 0);
	   transform: translate3d(0, 0, 0);
	   -webkit-transition: -webkit-transform ease-out 200ms;
	   transition: -webkit-transform ease-out 200ms;
	   transition: transform ease-out 200ms;
	   transition: transform ease-out 200ms, -webkit-transform ease-out 200ms;
	}
	
	.menu-item:hover {
	   background: #EEEEEE;
	   color: #3290B1;
	}
	
	.red {
	   background-color: #FE4365;
	   box-shadow: 3px 3px 0 0 rgba(0, 0, 0, 0.14);
	   text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.12);
	}
	
	.red:hover {
	   color: #FE4365;
	   text-shadow: none;
	}
</style>

</head>

<div layout:fragment="content">
   <section class="hero-wrap hero-wrap-2"
      style="background-image: url(&quot;/images/bg_2.jpg&quot;); background-position: 50% 0%;"
      data-stellar-background-ratio="0.5">
      <div class="overlay"></div>
      <div class="container">
         <div
            class="row no-gutters slider-text align-items-end justify-content-center">
            <div
               class="col-md-9 ftco-animate mb-5 text-center fadeInUp ftco-animated">
               <h2 class="mb-0 bread">자유 게시판</h2>
            </div>
         </div>
      </div>
   </section>
 
   	<button type="button" class="btn btn-primary" th:onclick="|location.href='@{bInsert(type=${type})}'|">글 등록하기</button>
   	
   	<!-- 게시글 정렬 -->
   	<input type="radio" name="lclsf" value="all" checked>전체
   	<input type="radio" name="lclsf" value="genrl">일반
   	<input type="radio" name="lclsf" value="reply">후기
   	
   	
   	<a href="#" class="menu-item red"> <i class="fa fa-heart">3</i></a>
   	
   	
    <table class="table mb-3">
	      <thead class="thead-dark">
	         <tr>
	            <th>게시판번호</th>   
	            <th>작성자</th>   
	            <th>제목</th>
	            <th>조회수</th>
	            <th>작성일자</th>
	            <th>타입</th>   
	         </tr>
	      </thead>
	      <tbody id = "check">
	         <tr th:each="b : ${bList}" th:onclick="|location.href='@{bSelect(bBoardNo=${b.bBoardNo})}'|">
	            <td th:text=${b.bBoardNo}></td>
	            <td th:text=${b.writer}></td>
	            <td th:text=${b.ttl}></td>
	            <td th:text=${b.inq}></td>
	            <td th:text="${#dates.format(b.dt, 'yyyy/MM/dd')}"></td>
	            <td id = type th:text=${b.type}></td>
	         </tr>
	      </tbody>
	   </table>
   
   <script>
   		$("input:radio[name=lclsf]").click(function(){
   			if($("input[name=lclsf]:checked").val() == "all"){
   				range();
   			} else if($("input[name=lclsf]:checked").val() == "genrl"){
   			 	range();
   			} else if($("input[name=lclsf]:checked").val() == "reply"){
   				range();
   			}
   		})

   		function range() {
				let lclsf = $("input[name=lclsf]:checked").val();
				let type = $("#type").text();
				
				$.ajax({
					url : '/bboard/bList',
					method : 'post',
					data : {lclsf:lclsf, type:type},
				}).then(res => {
					$("#check").empty();
					
					for(r of res){
						console.log(r);
						$("#check").append(makeTr(r));
					}
				})
   		}
   		
   		function makeTr(r){
	   		let tr = ` <tr onclick="location.href='/bboard/bSelect?bBoardNo=${r.bboardNo}'">
				   			<td>${r.bboardNo}</td>
				   			<td>${r.writer}</td>
			   		        <td>${r.ttl}</td>
			   		        <td>${r.inq}</td>
			   		        <td>${r.dt}</td>
			   		        <td id = type>${r.type}</td>
					    </tr>`
		         
		    return tr;
	   	}
   </script>
</div>
</html>