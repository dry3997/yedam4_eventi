<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
   xmlns:th="http://www.thymeleaf.org"
   xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
   layout:decorate="~{layouts/default_layout}"
   xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
   
<head>
	<link rel="stylesheet" href="index.css" />
   	<link rel="stylesheet" href="eventi.css" />
   	<!-- 구글 폰트 아이콘 -->
   <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
<style>

tbody>tr:hover {
	background-color: #ddd;
}
.main{
	padding:40px; 
}
#content{
	width: 70%;
	margin:0 auto;
}

#estiLeft{
	width:20%;
	padding:15px;
}
#estiRight{
	width:75%;
}
/* 필터링 영역 */
.filtering-area {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.filteringbox > h2,
.selectbox {
    display: inline-block;
    font-size: 20px;
}
.filteringbox > h2 {
    margin-right: 16px;
    font-weight: normal;
}
.selectbox {
    border: none;
    outline: none;
    font-weight: bold;
    color: var(--main-color);
    cursor: pointer;
}
.select-item {
    font-size: 14px;
    margin: 100px;
    color: #000;
    cursor: pointer;
}
/* 필터링 영역 끝 */ 
/* 검색, 버튼 영역 */
.search-area {
    display: flex;
    gap: 6px;
}
.searchbox,
.button {
    display: inline-block;
    height: 40px;
    padding: 12px;
    border-radius: 3px;
}
.searchbox {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 300px;
    border: 1px solid var(--light-gray);
}
.searchbox > input {
    width: 100%;
    margin-right: 12px;
    border: none;
    outline: none;
}
.searchbox > input::placeholder {
    color: var(--light-gray);
}
.searchbox > i {
    color: var(--main-color);
    cursor: pointer;
}

.button {
    cursor: pointer;
}
.user-search-button {
    background: #fff;
    border: 1px solid var(--light-gray);
}
.post-button {
    background: var(--main-color);
    border: none;
    color: #fff;
}
/* 검색, 버튼 영역 끝 */
@import url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.6/dist/web/static/pretendard-dynamic-subset.css");

:root {
	--main-color: #FAB955;
	--light-gray: #dbdbdb;
}

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video,
textarea {
	margin: 0;
	padding: 0;
	border: 0;
	font-size: 100%;
	font: inherit;
	vertical-align: baseline;
	box-sizing: border-box;
}
a {
	color: inherit;
	text-decoration: none;
}

/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
	display: block;
}
body * {
	font-family: 'Pretendard';
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
}
ol, ul, li {
	list-style: none;
}
blockquote, q {
	quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
	content: '';
	content: none;
}
table {
	border-collapse: collapse;
	border-spacing: 0;
}
</style>
</head>
	<div layout:fragment="content">
	<section id="picture "class="module bg-dark-60 gallery-page-header parallax-bg" 
			data-background="/images/notice.jpeg" style="background-image: url(&quot;assets/images/notice.jpeg&quot;); background-size: 100%;">
	          <div class="container">
	            <div class="row">
	              <div class="col-sm-6 col-sm-offset-3">
	                <h2 class="module-title font-alt" style="margin: 0;">공지사항게시판</h2>
	              </div>
	            </div>
	          </div>
	</section>
		
	
	<div class="main">
      	<div id="content">
      		<h2><b>공지사항</b></h2> 
      		
      		<!-- 게시글 검색 -->
      	<form id="searchForm">
	      	<div class="filtering-area">
				<div class="search-area">
	                <div class="searchbox" style="margin-top:35px">
	                   <input type="text" name="ttl" placeholder="검색어를 입력해주세요" th:value="${param.title}">
	                       <i class="material-symbols-outlined" id="find" onclick="gopage(1)">search</i>
	                </div>
	             </div>
			</div>	
		</form>
		
      		<hr>
      		<div id="estiContent" style="display: flex;justify-content: space-between;">
      			<!-- 왼쪽바 -->
      			<div id="estiLeft">
      			<div class="apply-button-wrap">
      				<th:block sec:authorize="hasAnyRole('ADMIN')">
						<button type="button" class="btn btn-outline-primary" th:onclick="|location.href='@{nocInsert}'|">공지사항등록</button>
					</th:block>
				</div>
				<h4 id="estiAll" style="border-bottom:1px solid grey;padding:10px;">전체</h4>
				</div>	
				
				<!-- 오른쪽바 -->
	      		<div id="estiRight">
					<table class="table mb-3">
						<thead class="thead-dark">
							<tr>
								<th>공지사항번호</th>
								<th>공지사항제목</th>
								<th>작성일자</th>
								<th>조회수</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="noc : ${nocList}" th:onclick="|location.href='@{nocDetail(noticeNo=${noc.noticeNo})}'|">
								<td th:text=${noc.noticeNo}></td>
								<td th:text=${noc.ttl}></td>
								<td th:text="${#dates.format(noc.dt, 'yyyy-MM-dd')}"></td> 
								<td th:text=${noc.see}></td>
							</tr>
						</tbody>
					</table>
				</div>
				
			</div>
		</div>
	</div>	
	
	<!-- 페이징 처리 -->
		<div class="row mt-5">
          <div class="col text-center">
            <div class="block-27">
               <th:block th:replace="fragments/paging :: component(${paging},'gopage')">
            </div>
          </div>
        </div>
        
<script>
//csrf 설정
var token = $("meta[name='_csrf']").attr("content");
var header = $("meta[name='_csrf_header']").attr("content");

//페이지 이동 
function gopage(i) {
    console.log(i);
    location.href = `/nocList?page=${i}&ttl=${$("input[name=ttl]").val()}`;
}
//정렬
function order(){
	console.log('클릭');
	let param = $("#searchForm").serialize()
	location.href=`/nocList?${param}`
}

//검색기능
$('#find').click(function() {
	gopage(1);
	})
//tr 생성 함수
function makeTr(r){
console.log(r)
let tr = `<tr onclick="location.href='/nocDetail?noticeNo=${r.noticeNo}'">
				<td>${r.noticeNo}</td>
				<td>${r.ttl}</td>
	 			<td>${r.dt}</td> 
				<td>${r.userId}</td>
		  </tr>`
return tr;		
}	

</script>	
</div>
</html>
