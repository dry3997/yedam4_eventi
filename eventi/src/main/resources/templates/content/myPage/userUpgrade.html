<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/default_layout}">
<head>
<!-- 1.사이드바 css적용 -->
<link rel="stylesheet" href="/css/myPageSide.css">
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<div layout:fragment="content" class="content">
		<section class="module bg-dark-60 gallery-page-header parallax-bg" data-background="/assets/images/gallery_bg.jpg" style="background-image: url(&quot;assets/images/gallery_bg.jpg&quot;);">
          <div class="container">
            <div class="row">
              <div class="col-sm-6 col-sm-offset-3">
                <h2 class="module-title font-alt">마이페이지</h2>
                <div class="module-subtitle font-serif">회원등급 승급신청</div>
              </div>
            </div>
          </div>
        </section>
		
		
		<div style="min-height: 700px">
			<!-- 3.현재페이지 myPageSide 적용 -->
			<th:block th:replace="fragments/myPageSide :: myPageSide"></th:block>
		
			<div id="signIn-right">
					<label style="width: 100px">사회자</label><input type="radio" class="inputRadio" name="certType" value="MC">
					<label style="width: 100px">디자이너</label><input type="radio" class="inputRadio" name="certType" value="DESIGNER"><br>
					<label style="width: 150px;">성 명</label> <input type="text" id="inputName" name="inputName"><br>
					<label style="width: 150px">자격증 발급번호</label> <input type="text" id="inputQno">
					
					<button type='button' id="qPlus">추가</button>
				</div>
					<ul id="qList" style="list-style: none;">
						<li class="qualLi"><span data-value='{"certName":"정보처리기능사","certNum":"12345678901A","certType":"MC"}'>자격증명: 정보처리기능사, 자격증발급번호: 12345678901A</span>
							<button type="button" class="quDelBtn">X</button></li>
							
						<!-- <li class="qualLi"><span
								data-value='{"certName":"정보처리기능사","certNum":"12345678901A","certType":"MC"}'>자격증 명:
								정보처리기능사, 자격증발급번호: 12345678901A</span>
							<button type="button" class="quDelBtn">X</button></li>
						<li class="qualLi"><span
								data-value='{"certName":"정보처리기능사","certNum":"12345678901A","certType":"MC"}'>자격증 명:
								정보처리기능사, 자격증발급번호: 12345678901A</span>
							<button type="button" class="quDelBtn">X</button></li>
						<li class="qualLi"><span
								data-value='{"certName":"정보처리기능사","certNum":"12345678901A","certType":"MC"}'>자격증 명:
								정보처리기능사, 자격증발급번호: 12345678901A</span>
							<button type="button" class="quDelBtn">X</button></li>
						<li class="qualLi"><span
								data-value='{"certName":"정보처리기능사","certNum":"12345678901A","certType":"MC"}'>자격증 명:
								정보처리기능사, 자격증발급번호: 12345678901A</span>
							<button type="button" class="quDelBtn">X</button></li> -->
					</ul>
					
		
		
		</div>
	<script >
	/* 자격증추가 */
	/* 자격증 진위확인 api사용 */
	$("#qPlus").click(function () {
		var name = $("#inputName").val();
		var qNo = $("#inputQno").val();
		var certType = $('input[name="certType"]:checked').val(); //:checked').value;
		var qName = "";
		$.ajax({
			url: `qualCheck?no=${qNo}&name=${name}`,
			dataType: "json",
			success: function (result) {
				if (result.result == true) {
					qName = result.certificateName;
					/* li 만들고 append */
					$("#qList").append($("<li/>").attr('class', 'qualLi').append(
						$("<span/>").attr('data-value', '{certName:' + qName + ',certName:' +
							qNo + ',certType:' + certType + '}').text("자격증 명: " + qName +
							", 자격증발급번호: " + qNo),
						$("<button/>").attr({
							type: "button",
							class: "qDel"
						}).text("X").on('click', function () {
							$(this).parentsUntil('#qList').remove(); //삭제버튼 추가
						})
					))
				} else {
					alert('확인되지 않는 자격증입니다.')
				}
			},
			error: function () {
				alert("서버 요청 실패");
			}
		})
	});
	</script>
	</div>
</body>
</html>