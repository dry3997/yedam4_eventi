<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/default_layout}"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<link rel="stylesheet" href="/css/model.css">
<style>
.fileDown {
	display: none;
}

h3 {
	font-weight: bold;
	text-align: center;
}

.contestContainer {
	padding: 20px;
	margin: auto;
	float: center;
}

ul {
	list-style: none;
}
</style>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<div layout:fragment="content" class="content">
		<section class="hero-wrap hero-wrap-2"
			style="background-image: url(&quot;/images/bg_2.jpg&quot;); background-position: 50% 0%;"
			data-stellar-background-ratio="0.5">
			<div class="overlay"></div>
			<div class="container">
				<div
					class="row no-gutters slider-text align-items-end justify-content-center">
					<div
						class="col-md-9 ftco-animate mb-5 text-center fadeInUp ftco-animated">
						<h2 class="mb-0 bread">공모전 응모신청</h2>

					</div>
				</div>
			</div>
		</section>


		<div class="contestContainer">
			<textarea rows="15" cols="90">
[콘테스트 참여 약관 동의]
1. 로고,일러스트 콘테스트에는 어떠한 스톡이미지, 프리백터,클럽아트도 사용해서는 안됩니다.
  상업적 사용이 제한되는 폰트, 스톡이미지의 사용 규정 및 범위를 위반할 시, 계정이 영구적으로 삭제될 수 있습니다. 작품에 유료 폰트,스톡이미지,프리백터 등을 사용한 경우에는 반드시 의뢰자에게 저작권 문제가 없을을 명시해야한 합니다.
2. 이벤티의 판단하에 본 디자인이 다른 디자이너의 작품을 도용한 것으로 판단되는 경우, 이벤티는 해당 디자이너의 활동을 제지 혹은 금지할 수 있습니다.
또한 상금이 지급되었을 경우 라우드소싱은 디자이너에게 전액 환불을 요구 할 수 있으며, 이에서 파생되는 의뢰자와의 분쟁 및 손해에 관해서는 관련법규에 따라 디자이너에게 배상의 의무가 부여될 수 있습니다.
 반드시 자신의 디자인만 등록해 주세요.
3. 로고, 일러스트 드으이 디자인은 반드시 백터 형태로 작업해야 합니다.
4. 잘못된 디자인으로 인해 법적인 문제에 휘말리게 될 경우, 모든 법적 그리고 금전적인 손실에 대한 책임은 디자이너 측에 있습니다.
5. 이벤티는 실제 상업적으로 사용될 디자인을 위뢰하는 경우 전문 디자이너 플랫폼입니다.
   동일 디자이너의 사연에 대해 의뢰자의 불만이 지속적으로 발생 시, 이벤티 내부 검수를 통해 참여가 제한될 수 있습니다.
</textarea>
			<br> <input type="checkbox" id="contestCheck">약관에 전부
			동의합니다..<br>

			<!-- 공모전등록 입력폼 -->
			<form action="/design/designInsert" enctype="multipart/form-data" name="contestfrm" method="post" onsubmit="return check();">
				<input type="hidden" id="token" th:name="${_csrf.parameterName}"
					th:value="${_csrf.token}" />
				<ul>
					<!-- 임시저장값 hidden -->
					<li><label>공모번호</label><input type="text" name="cNo" th:value="${contest.cNo}" readonly="readonly"></li>
					<li><label>카테고리</label><input type="text" name="caregory" th:value="${contest.category}" readonly="readonly"></li>
					<li><label>디자인번호</label><input type="text" name="dNo" th:value="${dNo}" readonly="readonly"><br /></li>
					<li><label>작성자</label><input type="text" name="writer" th:value="|${session.member.getUserId()}|" readonly="readonly"><br /></li>
					<li><label>등록일</label><input type="date" name="dtReg" th:value="${#calendars.format(#calendars.createNow(), 'yyyy-MM-dd')}" readonly></li>
					<li><label>제목</label><input type="text" name="name" required="required"></li>
					<li><label>요청사항</label> <textarea name="cntn" class="form-control" id="cntn" cols="30" rows="4" placeholder="내용을 입력해주세요." required="required"></textarea></li>
				</ul>

				<div class="col-md-12">
					<div class="form-group">
						<label>첨부파일</label><input id="imgInp" type="file" name="uploadFile" multiple="multiple" required="required">
						<div class="fileDown">
							<img id="blah" src="#" alt="your image" width="250px" />
							<button type="button" id="cancel" class="btn btn-warning cancel">
								<span>Cancel</span>
							</button>
						</div>
					</div>
				</div>

				<button type="reset">초기화</button>
				<button type="submit" id="insertForm">등록</button>
			</form>
			<button type="button" id="cancleBtn"
				onclick="location.href='/contest/List'">취소</button>

		</div>
		<script>
			//csrf설정
			var token = $("meta[name='_csrf']").attr("content");
			var header = $("meta[name='_csrf_header']").attr("content");
			let oEditors = []

			smartEditor = function() {
				console.log("Naver SmartEditor")
				nhn.husky.EZCreator.createInIFrame({
					oAppRef : oEditors,
					elPlaceHolder : "cntn",
					sSkinURI : "/smarteditor2/SmartEditor2Skin.html",
					fCreator : "createSEditor2"
				})
			}

			$(document).ready(function() {
				smartEditor()
			})

			//등록버튼 누를시
			$('#insertForm').on('click', function() {
				oEditors.getById["cntn"].exec("UPDATE_CONTENTS_FIELD", [])
				let cntn = document.getElementById("cntn").value;

			});

			//폼 등록버튼 전송전 체크함수.
			function check() {
				let check = $('input[type="checkbox"]').is(":checked");

				//유의사항 체크확인
				if (!check) {
					alert('약관에 동의하세요.');
					return false;
				}// 등록 확인
				if (!confirm('디자인 응모시겠습니까?')) {
					return false;
				}
				return true;
			}
			//파일 업로드 이미지 미리보기
			//파일 INPUT창에 변화가 있을 경우 실행
			$("#imgInp").on('change', function() {
				//파일을 올렸을 경우 input type=file은 사라지고 이미지만 띄어진다.
				$(this).toggleClass("fileDown"); //input파일
				$(this).next().toggleClass("fileDown"); //div
				readURL(this);
			});

			//이미지 미리보기 처리
			function readURL(input) {
				if (input.files && input.files[0]) {
					var reader = new FileReader();

					reader.onload = function(e) {
						$("#blah").attr('src', e.target.result);
					}

					reader.readAsDataURL(input.files[0]);
				}
			}

			//파일 삭제
			$("#cancel").on('click', function() {
				//파일을 지우고 싶을때 삭제버튼을 누르면 이미지는 사라지고 input type=file 입력폼이 다시 나타난다.
				$(this).parent().prev().toggleClass("fileDown");
				$(this).parent().toggleClass("fileDown");
				//file영역에 있던 값 삭제
				$("#imgInp").val('');
			})
		</script>
	</div>
</body>
</html>